function updateViewportDimensions(){var o=window,i=document,e=i.documentElement,t=i.getElementsByTagName("body")[0];return{width:o.innerWidth||e.clientWidth||t.clientWidth,height:o.innerHeight||e.clientHeight||t.clientHeight}}function loadGravatars(){viewport=updateViewportDimensions(),viewport.width>=768&&jQuery(".comment img[data-gravatar]").each(function(){jQuery(this).attr("src",jQuery(this).attr("data-gravatar"))})}!function(o){o.isScrollToFixed=function(i){return!!o(i).data("ScrollToFixed")},o.ScrollToFixed=function(i,e){function t(){m.trigger("preUnfixed.ScrollToFixed"),p(),m.trigger("unfixed.ScrollToFixed"),z=-1,y=m.offset().top,C=m.offset().left,F.options.offsets&&(C+=m.offset().left-m.position().left),-1==U&&(U=C),h=m.css("position"),T=!0,-1!=F.options.bottom&&(m.trigger("preFixed.ScrollToFixed"),d(),m.trigger("fixed.ScrollToFixed"))}function n(){var o=F.options.limit;return o?"function"==typeof o?o.apply(m):o:0}function r(){return"fixed"===h}function s(){return"absolute"===h}function l(){return!(r()||s())}function d(){if(!r()){var o=m[0].getBoundingClientRect();A.css({display:m.css("display"),width:o.width,height:o.height,float:m.css("float")}),cssOptions={"z-index":F.options.zIndex,position:"fixed",top:-1==F.options.bottom?x():"",bottom:-1==F.options.bottom?"":F.options.bottom,"margin-left":"0px"},F.options.dontSetWidth||(cssOptions.width=m.css("width")),m.css(cssOptions),m.addClass(F.options.baseClassName),F.options.className&&m.addClass(F.options.className),h="fixed"}}function c(){var o=n(),i=C;F.options.removeOffsets&&(i="",o-=y),cssOptions={position:"absolute",top:o,left:i,"margin-left":"0px",bottom:""},F.options.dontSetWidth||(cssOptions.width=m.css("width")),m.css(cssOptions),h="absolute"}function p(){l()||(z=-1,A.css("display","none"),m.css({"z-index":v,width:"",position:w,left:"",top:b,"margin-left":""}),m.removeClass("scroll-to-fixed-fixed"),F.options.className&&m.removeClass(F.options.className),h=null)}function a(o){o!=z&&(m.css("left",C-o),z=o)}function x(){var o=F.options.marginTop;return o?"function"==typeof o?o.apply(m):o:0}function f(){if(o.isScrollToFixed(m)&&!m.is(":hidden")){var i=T,e=l();T?l()&&(y=m.offset().top,C=m.offset().left):t();var f=o(window).scrollLeft(),h=o(window).scrollTop(),S=n();F.options.minWidth&&o(window).width()<F.options.minWidth?l()&&i||(g(),m.trigger("preUnfixed.ScrollToFixed"),p(),m.trigger("unfixed.ScrollToFixed")):F.options.maxWidth&&o(window).width()>F.options.maxWidth?l()&&i||(g(),m.trigger("preUnfixed.ScrollToFixed"),p(),m.trigger("unfixed.ScrollToFixed")):-1==F.options.bottom?S>0&&h>=S-x()?e||s()&&i||(g(),m.trigger("preAbsolute.ScrollToFixed"),c(),m.trigger("unfixed.ScrollToFixed")):h>=y-x()?(r()&&i||(g(),m.trigger("preFixed.ScrollToFixed"),d(),z=-1,m.trigger("fixed.ScrollToFixed")),a(f)):l()&&i||(g(),m.trigger("preUnfixed.ScrollToFixed"),p(),m.trigger("unfixed.ScrollToFixed")):S>0?h+o(window).height()-m.outerHeight(!0)>=S-(x()||-u())?r()&&(g(),m.trigger("preUnfixed.ScrollToFixed"),"absolute"===w?c():p(),m.trigger("unfixed.ScrollToFixed")):(r()||(g(),m.trigger("preFixed.ScrollToFixed"),d()),a(f),m.trigger("fixed.ScrollToFixed")):a(f)}}function u(){return F.options.bottom?F.options.bottom:0}function g(){var o=m.css("position");"absolute"==o?m.trigger("postAbsolute.ScrollToFixed"):"fixed"==o?m.trigger("postFixed.ScrollToFixed"):m.trigger("postUnfixed.ScrollToFixed")}var F=this;F.$el=o(i),F.el=i,F.$el.data("ScrollToFixed",F);var T=!1,m=F.$el,h,w,S,b,v,y=0,C=0,U=-1,z=-1,A=null,W,O,D=function(o){m.is(":visible")?(T=!1,f()):p()},N=function(o){window.requestAnimationFrame?requestAnimationFrame(f):f()},j=function(){var o=document.body;if(document.createElement&&o&&o.appendChild&&o.removeChild){var i=document.createElement("div");if(!i.getBoundingClientRect)return null;i.innerHTML="x",i.style.cssText="position:fixed;top:100px;",o.appendChild(i);var e=o.style.height,t=o.scrollTop;o.style.height="3000px",o.scrollTop=500;var n=i.getBoundingClientRect().top;o.style.height=e;var r=100===n;return o.removeChild(i),o.scrollTop=t,r}return null},E=function(o){o=o||window.event,o.preventDefault&&o.preventDefault(),o.returnValue=!1};F.init=function(){F.options=o.extend({},o.ScrollToFixed.defaultOptions,e),v=m.css("z-index"),F.$el.css("z-index",F.options.zIndex),A=o("<div />"),h=m.css("position"),w=m.css("position"),S=m.css("float"),b=m.css("top"),l()&&F.$el.after(A),o(window).bind("resize.ScrollToFixed",D),o(window).bind("scroll.ScrollToFixed",N),"ontouchmove"in window&&o(window).bind("touchmove.ScrollToFixed",f),F.options.preFixed&&m.bind("preFixed.ScrollToFixed",F.options.preFixed),F.options.postFixed&&m.bind("postFixed.ScrollToFixed",F.options.postFixed),F.options.preUnfixed&&m.bind("preUnfixed.ScrollToFixed",F.options.preUnfixed),F.options.postUnfixed&&m.bind("postUnfixed.ScrollToFixed",F.options.postUnfixed),F.options.preAbsolute&&m.bind("preAbsolute.ScrollToFixed",F.options.preAbsolute),F.options.postAbsolute&&m.bind("postAbsolute.ScrollToFixed",F.options.postAbsolute),F.options.fixed&&m.bind("fixed.ScrollToFixed",F.options.fixed),F.options.unfixed&&m.bind("unfixed.ScrollToFixed",F.options.unfixed),F.options.spacerClass&&A.addClass(F.options.spacerClass),m.bind("resize.ScrollToFixed",function(){A.height(m.height())}),m.bind("scroll.ScrollToFixed",function(){m.trigger("preUnfixed.ScrollToFixed"),p(),m.trigger("unfixed.ScrollToFixed"),f()}),m.bind("detach.ScrollToFixed",function(i){E(i),m.trigger("preUnfixed.ScrollToFixed"),p(),m.trigger("unfixed.ScrollToFixed"),o(window).unbind("resize.ScrollToFixed",D),o(window).unbind("scroll.ScrollToFixed",N),m.unbind(".ScrollToFixed"),A.remove(),F.$el.removeData("ScrollToFixed")}),D()},F.init()},o.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},o.fn.scrollToFixed=function(i){return this.each(function(){new o.ScrollToFixed(this,i)})}}(jQuery);var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var o={};return function(i,e,t){t||(t="Don't call this twice without a uniqueId"),o[t]&&clearTimeout(o[t]),o[t]=setTimeout(i,e)}}(),timeToWaitForLast=100;jQuery(document).ready(function($){loadGravatars(),viewport=updateViewportDimensions(),viewport.width});