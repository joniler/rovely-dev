function updateViewportDimensions(){var i=window,t=document,e=t.documentElement,o=t.getElementsByTagName("body")[0];return{width:i.innerWidth||e.clientWidth||o.clientWidth,height:i.innerHeight||e.clientHeight||o.clientHeight}}function loadGravatars(){viewport=updateViewportDimensions(),viewport.width>=768&&jQuery(".comment img[data-gravatar]").each(function(){jQuery(this).attr("src",jQuery(this).attr("data-gravatar"))})}!function(i){i.isScrollToFixed=function(t){return!!i(t).data("ScrollToFixed")},i.ScrollToFixed=function(t,e){function o(){b.trigger("preUnfixed.ScrollToFixed"),h(),b.trigger("unfixed.ScrollToFixed"),C=-1,y=b.offset().top,W=b.offset().left,m.options.offsets&&(W+=b.offset().left-b.position().left),-1==H&&(H=W),F=b.css("position"),g=!0,-1!=m.options.bottom&&(b.trigger("preFixed.ScrollToFixed"),a(),b.trigger("fixed.ScrollToFixed"))}function s(){var i=m.options.limit;return i?"function"==typeof i?i.apply(b):i:0}function n(){return"fixed"===F}function r(){return"absolute"===F}function l(){return!(n()||r())}function a(){if(!n()){var i=b[0].getBoundingClientRect();A.css({display:b.css("display"),width:i.width,height:i.height,float:b.css("float")}),cssOptions={"z-index":m.options.zIndex,position:"fixed",top:-1==m.options.bottom?c():"",bottom:-1==m.options.bottom?"":m.options.bottom,"margin-left":"0px"},m.options.dontSetWidth||(cssOptions.width=b.css("width")),b.css(cssOptions),b.addClass(m.options.baseClassName),m.options.className&&b.addClass(m.options.className),F="fixed"}}function d(){var i=s(),t=W;m.options.removeOffsets&&(t="",i-=y),cssOptions={position:"absolute",top:i,left:t,"margin-left":"0px",bottom:""},m.options.dontSetWidth||(cssOptions.width=b.css("width")),b.css(cssOptions),F="absolute"}function h(){l()||(C=-1,A.css("display","none"),b.css({"z-index":S,width:"",position:T,left:"",top:v,"margin-left":""}),b.removeClass("scroll-to-fixed-fixed"),m.options.className&&b.removeClass(m.options.className),F=null)}function p(i){i!=C&&(b.css("left",W-i),C=i)}function c(){var i=m.options.marginTop;return i?"function"==typeof i?i.apply(b):i:0}function f(){if(i.isScrollToFixed(b)&&!b.is(":hidden")){var t=g,e=l();g?l()&&(y=b.offset().top,W=b.offset().left):o();var f=i(window).scrollLeft(),F=i(window).scrollTop(),w=s();m.options.minWidth&&i(window).width()<m.options.minWidth?l()&&t||(u(),b.trigger("preUnfixed.ScrollToFixed"),h(),b.trigger("unfixed.ScrollToFixed")):m.options.maxWidth&&i(window).width()>m.options.maxWidth?l()&&t||(u(),b.trigger("preUnfixed.ScrollToFixed"),h(),b.trigger("unfixed.ScrollToFixed")):-1==m.options.bottom?w>0&&F>=w-c()?e||r()&&t||(u(),b.trigger("preAbsolute.ScrollToFixed"),d(),b.trigger("unfixed.ScrollToFixed")):F>=y-c()?(n()&&t||(u(),b.trigger("preFixed.ScrollToFixed"),a(),C=-1,b.trigger("fixed.ScrollToFixed")),p(f)):l()&&t||(u(),b.trigger("preUnfixed.ScrollToFixed"),h(),b.trigger("unfixed.ScrollToFixed")):w>0?F+i(window).height()-b.outerHeight(!0)>=w-(c()||-x())?n()&&(u(),b.trigger("preUnfixed.ScrollToFixed"),"absolute"===T?d():h(),b.trigger("unfixed.ScrollToFixed")):(n()||(u(),b.trigger("preFixed.ScrollToFixed"),a()),p(f),b.trigger("fixed.ScrollToFixed")):p(f)}}function x(){return m.options.bottom?m.options.bottom:0}function u(){var i=b.css("position");"absolute"==i?b.trigger("postAbsolute.ScrollToFixed"):"fixed"==i?b.trigger("postFixed.ScrollToFixed"):b.trigger("postUnfixed.ScrollToFixed")}var m=this;m.$el=i(t),m.el=t,m.$el.data("ScrollToFixed",m);var g=!1,b=m.$el,F,T,w,v,S,y=0,W=0,H=-1,C=-1,A=null,O,N,z=function(i){b.is(":visible")?(g=!1,f()):h()},L=function(i){window.requestAnimationFrame?requestAnimationFrame(f):f()},R=function(){var i=document.body;if(document.createElement&&i&&i.appendChild&&i.removeChild){var t=document.createElement("div");if(!t.getBoundingClientRect)return null;t.innerHTML="x",t.style.cssText="position:fixed;top:100px;",i.appendChild(t);var e=i.style.height,o=i.scrollTop;i.style.height="3000px",i.scrollTop=500;var s=t.getBoundingClientRect().top;i.style.height=e;var n=100===s;return i.removeChild(t),i.scrollTop=o,n}return null},q=function(i){i=i||window.event,i.preventDefault&&i.preventDefault(),i.returnValue=!1};m.init=function(){m.options=i.extend({},i.ScrollToFixed.defaultOptions,e),S=b.css("z-index"),m.$el.css("z-index",m.options.zIndex),A=i("<div />"),F=b.css("position"),T=b.css("position"),w=b.css("float"),v=b.css("top"),l()&&m.$el.after(A),i(window).bind("resize.ScrollToFixed",z),i(window).bind("scroll.ScrollToFixed",L),"ontouchmove"in window&&i(window).bind("touchmove.ScrollToFixed",f),m.options.preFixed&&b.bind("preFixed.ScrollToFixed",m.options.preFixed),m.options.postFixed&&b.bind("postFixed.ScrollToFixed",m.options.postFixed),m.options.preUnfixed&&b.bind("preUnfixed.ScrollToFixed",m.options.preUnfixed),m.options.postUnfixed&&b.bind("postUnfixed.ScrollToFixed",m.options.postUnfixed),m.options.preAbsolute&&b.bind("preAbsolute.ScrollToFixed",m.options.preAbsolute),m.options.postAbsolute&&b.bind("postAbsolute.ScrollToFixed",m.options.postAbsolute),m.options.fixed&&b.bind("fixed.ScrollToFixed",m.options.fixed),m.options.unfixed&&b.bind("unfixed.ScrollToFixed",m.options.unfixed),m.options.spacerClass&&A.addClass(m.options.spacerClass),b.bind("resize.ScrollToFixed",function(){A.height(b.height())}),b.bind("scroll.ScrollToFixed",function(){b.trigger("preUnfixed.ScrollToFixed"),h(),b.trigger("unfixed.ScrollToFixed"),f()}),b.bind("detach.ScrollToFixed",function(t){q(t),b.trigger("preUnfixed.ScrollToFixed"),h(),b.trigger("unfixed.ScrollToFixed"),i(window).unbind("resize.ScrollToFixed",z),i(window).unbind("scroll.ScrollToFixed",L),b.unbind(".ScrollToFixed"),A.remove(),m.$el.removeData("ScrollToFixed")}),z()},m.init()},i.ScrollToFixed.defaultOptions={marginTop:0,limit:0,bottom:-1,zIndex:1e3,baseClassName:"scroll-to-fixed-fixed"},i.fn.scrollToFixed=function(t){return this.each(function(){new i.ScrollToFixed(this,t)})}}(jQuery),function(i,t,e,o){function s(t,e){var n=this;"object"==typeof e&&(delete e.refresh,delete e.render,i.extend(this,e)),this.$element=i(t),!this.imageSrc&&this.$element.is("img")&&(this.imageSrc=this.$element.attr("src"));var r=(this.position+"").toLowerCase().match(/\S+/g)||[];if(r.length<1&&r.push("center"),1==r.length&&r.push(r[0]),("top"==r[0]||"bottom"==r[0]||"left"==r[1]||"right"==r[1])&&(r=[r[1],r[0]]),this.positionX!=o&&(r[0]=this.positionX.toLowerCase()),this.positionY!=o&&(r[1]=this.positionY.toLowerCase()),n.positionX=r[0],n.positionY=r[1],"left"!=this.positionX&&"right"!=this.positionX&&(this.positionX=isNaN(parseInt(this.positionX))?"center":parseInt(this.positionX)),"top"!=this.positionY&&"bottom"!=this.positionY&&(this.positionY=isNaN(parseInt(this.positionY))?"center":parseInt(this.positionY)),this.position=this.positionX+(isNaN(this.positionX)?"":"px")+" "+this.positionY+(isNaN(this.positionY)?"":"px"),navigator.userAgent.match(/(iPod|iPhone|iPad)/))return this.imageSrc&&this.iosFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;if(navigator.userAgent.match(/(Android)/))return this.imageSrc&&this.androidFix&&!this.$element.is("img")&&this.$element.css({backgroundImage:"url("+this.imageSrc+")",backgroundSize:"cover",backgroundPosition:this.position}),this;this.$mirror=i("<div />").prependTo("body");var l=this.$element.find(">.parallax-slider"),a=!1;0==l.length?this.$slider=i("<img />").prependTo(this.$mirror):(this.$slider=l.prependTo(this.$mirror),a=!0),this.$mirror.addClass("parallax-mirror").css({visibility:"hidden",zIndex:this.zIndex,position:"fixed",top:0,left:0,overflow:"hidden"}),this.$slider.addClass("parallax-slider").one("load",function(){n.naturalHeight&&n.naturalWidth||(n.naturalHeight=this.naturalHeight||this.height||1,n.naturalWidth=this.naturalWidth||this.width||1),n.aspectRatio=n.naturalWidth/n.naturalHeight,s.isSetup||s.setup(),s.sliders.push(n),s.isFresh=!1,s.requestRender()}),a||(this.$slider[0].src=this.imageSrc),(this.naturalHeight&&this.naturalWidth||this.$slider[0].complete||l.length>0)&&this.$slider.trigger("load")}function n(o){return this.each(function(){var n=i(this),r="object"==typeof o&&o;this==t||this==e||n.is("body")?s.configure(r):n.data("px.parallax")?"object"==typeof o&&i.extend(n.data("px.parallax"),r):(r=i.extend({},n.data(),r),n.data("px.parallax",new s(this,r))),"string"==typeof o&&("destroy"==o?s.destroy(this):s[o]())})}!function(){for(var i=0,e=["ms","moz","webkit","o"],o=0;o<e.length&&!t.requestAnimationFrame;++o)t.requestAnimationFrame=t[e[o]+"RequestAnimationFrame"],t.cancelAnimationFrame=t[e[o]+"CancelAnimationFrame"]||t[e[o]+"CancelRequestAnimationFrame"];t.requestAnimationFrame||(t.requestAnimationFrame=function(e){var o=(new Date).getTime(),s=Math.max(0,16-(o-i)),n=t.setTimeout(function(){e(o+s)},s);return i=o+s,n}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(i){clearTimeout(i)})}(),i.extend(s.prototype,{speed:.2,bleed:0,zIndex:-100,iosFix:!0,androidFix:!0,position:"center",overScrollFix:!1,refresh:function(){this.boxWidth=this.$element.outerWidth(),this.boxHeight=this.$element.outerHeight()+2*this.bleed,this.boxOffsetTop=this.$element.offset().top-this.bleed,this.boxOffsetLeft=this.$element.offset().left,this.boxOffsetBottom=this.boxOffsetTop+this.boxHeight;var i=s.winHeight,t=s.docHeight,e=Math.min(this.boxOffsetTop,t-i),o=Math.max(this.boxOffsetTop+this.boxHeight-i,0),n=this.boxHeight+(e-o)*(1-this.speed)|0,r=(this.boxOffsetTop-e)*(1-this.speed)|0;if(n*this.aspectRatio>=this.boxWidth){this.imageWidth=n*this.aspectRatio|0,this.imageHeight=n,this.offsetBaseTop=r;var l=this.imageWidth-this.boxWidth;this.offsetLeft="left"==this.positionX?0:"right"==this.positionX?-l:isNaN(this.positionX)?-l/2|0:Math.max(this.positionX,-l)}else{this.imageWidth=this.boxWidth,this.imageHeight=this.boxWidth/this.aspectRatio|0,this.offsetLeft=0;var l=this.imageHeight-n;this.offsetBaseTop="top"==this.positionY?r:"bottom"==this.positionY?r-l:isNaN(this.positionY)?r-l/2|0:r+Math.max(this.positionY,-l)}},render:function(){var i=s.scrollTop,t=s.scrollLeft,e=this.overScrollFix?s.overScroll:0,o=i+s.winHeight;this.boxOffsetBottom>i&&this.boxOffsetTop<=o?(this.visibility="visible",this.mirrorTop=this.boxOffsetTop-i,this.mirrorLeft=this.boxOffsetLeft-t,this.offsetTop=this.offsetBaseTop-this.mirrorTop*(1-this.speed)):this.visibility="hidden",this.$mirror.css({transform:"translate3d(0px, 0px, 0px)",visibility:this.visibility,top:this.mirrorTop-e,left:this.mirrorLeft,height:this.boxHeight,width:this.boxWidth}),this.$slider.css({transform:"translate3d(0px, 0px, 0px)",position:"absolute",top:this.offsetTop,left:this.offsetLeft,height:this.imageHeight,width:this.imageWidth,maxWidth:"none"})}}),i.extend(s,{scrollTop:0,scrollLeft:0,winHeight:0,winWidth:0,docHeight:1<<30,docWidth:1<<30,sliders:[],isReady:!1,isFresh:!1,isBusy:!1,setup:function(){if(!this.isReady){var o=i(e),n=i(t),r=function(){s.winHeight=n.height(),s.winWidth=n.width(),s.docHeight=o.height(),s.docWidth=o.width()},l=function(){var i=n.scrollTop(),t=s.docHeight-s.winHeight,e=s.docWidth-s.winWidth;s.scrollTop=Math.max(0,Math.min(t,i)),s.scrollLeft=Math.max(0,Math.min(e,n.scrollLeft())),s.overScroll=Math.max(i-t,Math.min(i,0))};n.on("resize.px.parallax load.px.parallax",function(){r(),s.isFresh=!1,s.requestRender()}).on("scroll.px.parallax load.px.parallax",function(){l(),s.requestRender()}),r(),l(),this.isReady=!0}},configure:function(t){"object"==typeof t&&(delete t.refresh,delete t.render,i.extend(this.prototype,t))},refresh:function(){i.each(this.sliders,function(){this.refresh()}),this.isFresh=!0},render:function(){this.isFresh||this.refresh(),i.each(this.sliders,function(){this.render()})},requestRender:function(){var i=this;this.isBusy||(this.isBusy=!0,t.requestAnimationFrame(function(){i.render(),i.isBusy=!1}))},destroy:function(e){var o,n=i(e).data("px.parallax");for(n.$mirror.remove(),o=0;o<this.sliders.length;o+=1)this.sliders[o]==n&&this.sliders.splice(o,1);i(e).data("px.parallax",!1),0===this.sliders.length&&(i(t).off("scroll.px.parallax resize.px.parallax load.px.parallax"),this.isReady=!1,s.isSetup=!1)}});var r=i.fn.parallax;i.fn.parallax=n,i.fn.parallax.Constructor=s,i.fn.parallax.noConflict=function(){return i.fn.parallax=r,this},i(e).on("ready.px.parallax.data-api",function(){i('[data-parallax="scroll"]').parallax()})}(jQuery,window,document);var viewport=updateViewportDimensions(),waitForFinalEvent=function(){var i={};return function(t,e,o){o||(o="Don't call this twice without a uniqueId"),i[o]&&clearTimeout(i[o]),i[o]=setTimeout(t,e)}}(),timeToWaitForLast=100;jQuery(document).ready(function($){loadGravatars(),viewport=updateViewportDimensions(),viewport.width});